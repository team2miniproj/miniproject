"""
ê°„ë‹¨í•œ AI ë¶„ì„ ì„œë²„ - ê°ì • ë¶„ì„ê³¼ í”¼ë“œë°± ìƒì„±ë§Œ ì œê³µ
"""
from fastapi import FastAPI, HTTPException
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel
from typing import List, Dict, Any
import logging
import uvicorn
import random

# ë¡œê¹… ì„¤ì •
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

app = FastAPI(
    title="AI ê°ì • ë¶„ì„ ë° í”¼ë“œë°± ì„œë²„",
    description="í…ìŠ¤íŠ¸ ê¸°ë°˜ ê°ì • ë¶„ì„ê³¼ AI í”¼ë“œë°± ìƒì„± ì„œë¹„ìŠ¤",
    version="1.0.0"
)

# CORS ì„¤ì • (ê°œë°œ í™˜ê²½ìš© - ëª¨ë“  origin í—ˆìš©)
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=False,
    allow_methods=["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    allow_headers=["*"],
)

# ìš”ì²­/ì‘ë‹µ ëª¨ë¸
class EmotionAnalysisRequest(BaseModel):
    text: str
    user_id: str = "default"

class EmotionScore(BaseModel):
    emotion: str
    score: float
    emoji: str

class EmotionAnalysisResponse(BaseModel):
    primary_emotion: str
    primary_emotion_score: float
    primary_emotion_emoji: str
    all_emotions: List[EmotionScore]
    confidence: float

class FeedbackRequest(BaseModel):
    text: str
    emotion: str
    style: str = "empathetic"
    user_id: str = "default"

class FeedbackResponse(BaseModel):
    feedback_text: str
    style: str
    confidence: float

class DiaryStyleRequest(BaseModel):
    text: str
    user_id: str = "default"

class DiaryStyleResponse(BaseModel):
    diary_text: str
    confidence: float

# ì¼ê¸°ì²´ ë³€í™˜ ì—”ì§„
class DiaryStyleConverter:
    def __init__(self):
        self.diary_templates = {
            "ê¸°ì¨": [
                "ì˜¤ëŠ˜ì€ ì •ë§ ê¸°ìœ í•˜ë£¨ì˜€ë‹¤. {content} ì´ëŸ° ìˆœê°„ë“¤ì´ ë‚´ ì¸ìƒì˜ ì†Œì¤‘í•œ ë³´ë¬¼ì´ ë  ê²ƒ ê°™ë‹¤.",
                "í–‰ë³µí•œ í•˜ë£¨ë¥¼ ë³´ëƒˆë‹¤. {content} ì´ëŸ° ê¸°ì¨ì´ ê³„ì† ì´ì–´ì¡Œìœ¼ë©´ ì¢‹ê² ë‹¤.",
                "ì˜¤ëŠ˜ì€ ë§ˆìŒì´ ê°€ë²¼ì› ë‹¤. {content} ì •ë§ ê°ì‚¬í•œ í•˜ë£¨ì˜€ë‹¤."
            ],
            "ìŠ¬í””": [
                "ì˜¤ëŠ˜ì€ ë§ˆìŒì´ ë¬´ê±°ì› ë‹¤. {content} ì´ëŸ° ì‹œê°„ë„ ì§€ë‚˜ê°€ê² ì§€. ë‚´ì¼ì€ ë” ë‚˜ì€ ë‚ ì´ ì˜¬ ê²ƒì´ë‹¤.",
                "í˜ë“  í•˜ë£¨ì˜€ë‹¤. {content} í•˜ì§€ë§Œ ì´ ë˜í•œ ì§€ë‚˜ê°ˆ ê²ƒì´ë‹¤. ë‚˜ëŠ” ê°•í•˜ë‹¤.",
                "ì˜¤ëŠ˜ì€ ëˆˆë¬¼ì´ ë‚  ê²ƒ ê°™ì€ í•˜ë£¨ì˜€ë‹¤. {content} ì´ëŸ° ê°ì •ë„ ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒ ê°™ë‹¤."
            ],
            "ë¶„ë…¸": [
                "ì˜¤ëŠ˜ì€ í™”ê°€ ë‚¬ë‹¤. {content} ì´ëŸ° ê°ì •ì„ ëŠë¼ëŠ” ê²ƒë„ ë‹¹ì—°í•œ ì¼ì´ë‹¤.",
                "ì§œì¦ë‚˜ëŠ” í•˜ë£¨ì˜€ë‹¤. {content} í•˜ì§€ë§Œ ì´ ê°ì •ë„ ê³§ ì‚¬ë¼ì§ˆ ê²ƒì´ë‹¤.",
                "ì˜¤ëŠ˜ì€ ì •ë§ ì†ìƒí–ˆë‹¤. {content} ì´ëŸ° ì¼ë“¤ì´ ìˆì–´ë„ ë‚˜ëŠ” ê´œì°®ë‹¤."
            ],
            "ë‘ë ¤ì›€": [
                "ì˜¤ëŠ˜ì€ ë¶ˆì•ˆí•œ í•˜ë£¨ì˜€ë‹¤. {content} í•˜ì§€ë§Œ ê±±ì •ë§Œ í•´ë„ ì†Œìš©ì—†ë‹¤. ì°¨ê·¼ì°¨ê·¼ í•´ê²°í•´ë³´ì.",
                "ë‘ë ¤ìš´ ë§ˆìŒì´ ë“¤ì—ˆë‹¤. {content} ì´ëŸ° ê°ì •ë„ ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒì´ë‹¤.",
                "ì˜¤ëŠ˜ì€ ë§ˆìŒì´ í¸í•˜ì§€ ì•Šì•˜ë‹¤. {content} ë‚´ì¼ì€ ë” ë‚˜ì€ ë‚ ì´ ë  ê²ƒì´ë‹¤."
            ],
            "ë†€ëŒ": [
                "ì˜¤ëŠ˜ì€ ì •ë§ ë†€ë¼ìš´ ì¼ì´ ìˆì—ˆë‹¤. {content} ì´ëŸ° ìˆœê°„ë“¤ì´ ì¸ìƒì„ ì¬ë¯¸ìˆê²Œ ë§Œë“œëŠ” ê²ƒ ê°™ë‹¤.",
                "ê¹œì§ ë†€ë€ í•˜ë£¨ì˜€ë‹¤. {content} ì •ë§ ëœ»ë°–ì˜ ì¼ì´ì—ˆë‹¤.",
                "ì˜¤ëŠ˜ì€ ì˜ˆìƒì¹˜ ëª»í•œ ì¼ì´ ìˆì—ˆë‹¤. {content} ì´ëŸ° ë†€ë¼ì›€ì´ ìˆì–´ì•¼ ì¸ìƒì´ ì¬ë¯¸ìˆëŠ” ê²ƒ ê°™ë‹¤."
            ],
            "í˜ì˜¤": [
                "ì˜¤ëŠ˜ì€ ì •ë§ ì‹«ì€ ì¼ì´ ìˆì—ˆë‹¤. {content} ì´ëŸ° ì¼ë“¤ì€ ë¹¨ë¦¬ ìŠì–´ë²„ë¦¬ê³  ì‹¶ë‹¤.",
                "ë¶ˆì¾Œí•œ í•˜ë£¨ì˜€ë‹¤. {content} í•˜ì§€ë§Œ ì´ëŸ° ì¼ë“¤ë„ ì§€ë‚˜ê°ˆ ê²ƒì´ë‹¤.",
                "ì˜¤ëŠ˜ì€ ì •ë§ ì§œì¦ë‚˜ëŠ” ì¼ì´ ìˆì—ˆë‹¤. {content} ì´ëŸ° ê°ì •ë„ ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒì´ë‹¤."
            ],
            "ì¤‘ì„±": [
                "ì˜¤ëŠ˜ì€ í‰ë²”í•œ í•˜ë£¨ì˜€ë‹¤. {content} ì´ëŸ° ì¼ìƒë„ ì†Œì¤‘í•œ ê²ƒ ê°™ë‹¤.",
                "ì°¨ë¶„í•œ í•˜ë£¨ë¥¼ ë³´ëƒˆë‹¤. {content} ë•Œë¡œëŠ” ì´ëŸ° í‰ì˜¨í•¨ì´ í•„ìš”í•˜ë‹¤.",
                "ì˜¤ëŠ˜ì€ ì”ì”í•œ í•˜ë£¨ì˜€ë‹¤. {content} ì´ëŸ° ì‹œê°„ë“¤ë„ ì˜ë¯¸ê°€ ìˆëŠ” ê²ƒ ê°™ë‹¤."
            ]
        }
    
    def convert_to_diary_style(self, text: str, emotion: str = "ì¤‘ì„±") -> DiaryStyleResponse:
        """í…ìŠ¤íŠ¸ë¥¼ ì¼ê¸°ì²´ë¡œ ë³€í™˜"""
        import random
        
        # ê°ì •ì— ë”°ë¥¸ í…œí”Œë¦¿ ì„ íƒ
        templates = self.diary_templates.get(emotion, self.diary_templates["ì¤‘ì„±"])
        template = random.choice(templates)
        
        # í…œí”Œë¦¿ì— ë‚´ìš© ì‚½ì…
        diary_text = template.format(content=text)
        
        return DiaryStyleResponse(
            diary_text=diary_text,
            confidence=random.uniform(0.8, 0.95)
        )

# ê°ì • ë¶„ì„ ì—”ì§„
class EmotionAnalyzer:
    def __init__(self):
        self.emotions = [
            {"emotion": "ê¸°ì¨", "emoji": "ğŸ˜Š"},
            {"emotion": "ìŠ¬í””", "emoji": "ğŸ˜¢"},
            {"emotion": "ë¶„ë…¸", "emoji": "ğŸ˜¡"},
            {"emotion": "ë‘ë ¤ì›€", "emoji": "ğŸ˜°"},
            {"emotion": "ë†€ëŒ", "emoji": "ğŸ˜®"},
            {"emotion": "í˜ì˜¤", "emoji": "ğŸ¤¢"},
            {"emotion": "ì¤‘ì„±", "emoji": "ğŸ˜"},
        ]
        
        self.keyword_mapping = {
            "ê¸°ì¨": ["í–‰ë³µ", "ê¸°ì˜", "ì¦ê±°", "ì›ƒ", "ì¢‹", "ì‚¬ë‘", "ê°ì‚¬", "ì¶•í•˜", "ë§Œì¡±", "ê¸°ë»", "ì‹ ë‚˜", "ì¬ë¯¸", "ì™„ë²½"],
            "ìŠ¬í””": ["ìŠ¬í”„", "ìš°ìš¸", "ì•„í”„", "ëˆˆë¬¼", "í˜ë“¤", "ê´´ë¡œ", "ì™¸ë¡œ", "ì†ìƒ", "ì‹¤ë§", "ìƒì²˜", "ì ˆë§", "ì„œëŸ¬"],
            "ë¶„ë…¸": ["í™”", "ì§œì¦", "ì—´ë°›", "ë¶„ë…¸", "ì‹«", "ë¯¸ì›Œ", "ë‹µë‹µ", "ë¹¡ì³", "ì–µìš¸", "ë¶„í•´", "ì•…"],
            "ë‘ë ¤ì›€": ["ë¬´ì„œ", "ê±±ì •", "ë¶ˆì•ˆ", "ë‘ë µ", "ë–¨ë ¤", "ê²", "ê·¼ì‹¬", "ì—¼ë ¤", "ì¡°ì‹¬", "ìœ„í—˜"],
            "ë†€ëŒ": ["ë†€ë¼", "ê¹œì§", "ì–´ë¨¸", "í—‰", "ì™€", "ëŒ€ë°•", "ì–´ë¼", "ì„¸ìƒ", "ì§„ì§œ", "ì •ë§"],
            "í˜ì˜¤": ["ì—­ê²¨", "ë”ëŸ¬", "ì§€ê²¨", "ì§•ê·¸", "ë”ì°", "ì‹«ì–´", "í˜ì˜¤", "êµ¬ì—­"],
            "ì¤‘ì„±": ["ê·¸ëƒ¥", "ë³´í†µ", "ì¼ë°˜", "í‰ë²”", "ê·¸ì €", "ë‹¨ìˆœ", "ê·¸ëŸ°", "ì´ëŸ°"]
        }
    
    def analyze(self, text: str) -> EmotionAnalysisResponse:
        """ì‹¤ì œ í…ìŠ¤íŠ¸ ë¶„ì„ ê¸°ë°˜ ê°ì • ë¶„ì„"""
        emotion_scores = {}
        text_lower = text.lower()
        
        # í‚¤ì›Œë“œ ê¸°ë°˜ ì ìˆ˜ ê³„ì‚°
        for emotion, keywords in self.keyword_mapping.items():
            score = 0
            for keyword in keywords:
                if keyword in text_lower:
                    score += 1
            emotion_scores[emotion] = score
        
        # ê°€ì¥ ë†’ì€ ì ìˆ˜ì˜ ê°ì • ì°¾ê¸°
        primary_emotion_name = max(emotion_scores, key=emotion_scores.get)
        
        # ì ìˆ˜ê°€ 0ì´ë©´ ì¤‘ì„±ìœ¼ë¡œ ì„¤ì •
        if emotion_scores[primary_emotion_name] == 0:
            primary_emotion_name = "ì¤‘ì„±"
        
        # ëª¨ë“  ê°ì • ì ìˆ˜ ì •ê·œí™”
        all_emotions = []
        total_keywords = sum(len(keywords) for keywords in self.keyword_mapping.values())
        
        for emotion_info in self.emotions:
            emotion_name = emotion_info["emotion"]
            raw_score = emotion_scores.get(emotion_name, 0)
            
            # ê¸°ë³¸ ì ìˆ˜ + í‚¤ì›Œë“œ ì ìˆ˜ + ì•½ê°„ì˜ ëœë¤
            base_score = 0.1
            keyword_score = (raw_score / max(len(self.keyword_mapping[emotion_name]), 1)) * 0.8
            random_score = random.uniform(0, 0.1)
            
            final_score = base_score + keyword_score + random_score
            
            # ì£¼ìš” ê°ì •ì— ë³´ë„ˆìŠ¤ ì ìˆ˜
            if emotion_name == primary_emotion_name:
                final_score = max(final_score, 0.6)
            
            all_emotions.append(EmotionScore(
                emotion=emotion_name,
                score=min(final_score, 1.0),
                emoji=emotion_info["emoji"]
            ))
        
        # ì ìˆ˜ìˆœ ì •ë ¬
        all_emotions.sort(key=lambda x: x.score, reverse=True)
        
        # ì£¼ìš” ê°ì • ì •ë³´ ì°¾ê¸°
        primary_emotion_info = next(e for e in all_emotions if e.emotion == primary_emotion_name)
        
        return EmotionAnalysisResponse(
            primary_emotion=primary_emotion_name,
            primary_emotion_score=primary_emotion_info.score,
            primary_emotion_emoji=primary_emotion_info.emoji,
            all_emotions=all_emotions,
            confidence=random.uniform(0.75, 0.95)
        )

# í”¼ë“œë°± ìƒì„± ì—”ì§„
class FeedbackGenerator:
    def __init__(self):
        self.templates = {
            "empathetic": {
                "ê¸°ì¨": [
                    "ì •ë§ ê¸°ìœ ì¼ì´ ìˆì—ˆë‚˜ë³´ë„¤ìš”! ê·¸ í–‰ë³µí•œ ê°ì •ì´ ê¸€ì—ì„œ ëŠê»´ì§‘ë‹ˆë‹¤. ì´ëŸ° ìˆœê°„ë“¤ì´ ì†Œì¤‘í•œ ê²ƒ ê°™ì•„ìš”.",
                    "í–‰ë³µí•œ ë§ˆìŒì´ ì „í•´ì ¸ìš”. ì¢‹ì€ ì¼ì´ ìˆìœ¼ì…¨ë‚˜ ë´ìš”. ê·¸ ê¸°ì¨ì´ ë§ˆìŒì— ì˜¤ë˜ ë‚¨ì•˜ìœ¼ë©´ ì¢‹ê² ì–´ìš”.",
                    "ê¸°ìœ ê°ì •ì´ ëŠê»´ì ¸ìš”. ì´ëŸ° ì¦ê±°ìš´ ìˆœê°„ë“¤ì„ ê°„ì§í•˜ì‹œëŠ” ê²ƒì´ ì •ë§ ì¢‹ì€ ê²ƒ ê°™ì•„ìš”."
                ],
                "ìŠ¬í””": [
                    "í˜ë“  ì‹œê°„ì„ ë³´ë‚´ê³  ê³„ì‹œëŠ”êµ°ìš”. ê·¸ ë§ˆìŒì´ ì¶©ë¶„íˆ ì´í•´ë©ë‹ˆë‹¤. ì´ëŸ° ê°ì •ë„ ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒì´ì—ìš”.",
                    "ìŠ¬í”ˆ ë§ˆìŒì´ ëŠê»´ì ¸ìš”. ì§€ê¸ˆ ëŠë¼ëŠ” ê°ì •ì´ ë¬´ê²ê²Œ ëŠê»´ì§€ì‹¤ ê²ƒ ê°™ì•„ìš”. í•¨ê»˜ ì´ê²¨ë‚´ë´ìš”.",
                    "ì–´ë ¤ìš´ ìƒí™©ì— ê³„ì‹  ê²ƒ ê°™ì•„ìš”. ê·¸ ë§ˆìŒì„ ì¶©ë¶„íˆ ê³µê°í•©ë‹ˆë‹¤. ê³§ ì¢‹ì€ ë‚ ì´ ì˜¬ ê±°ì˜ˆìš”."
                ],
                "ë¶„ë…¸": [
                    "í™”ê°€ ë‚˜ëŠ” ì¼ì´ ìˆì—ˆë‚˜ ë´ìš”. ê·¸ ê°ì •ì„ í‘œí˜„í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•´ìš”. ê·¸ ë§ˆìŒì„ ì´í•´í•  ìˆ˜ ìˆì–´ìš”.",
                    "ë¶„ë…¸ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ê°ì •ì´ì—ìš”. ì •ë§ ì†ìƒí•˜ì…¨ì„ ê²ƒ ê°™ì•„ìš”. ê·¸ ê°ì •ì´ ì¶©ë¶„íˆ ê³µê°ë©ë‹ˆë‹¤.",
                    "í™”ë‚˜ëŠ” ìƒí™©ì´ ìˆì—ˆë‚˜ ë´ìš”. ê·¸ëŸ° ê°ì •ì„ ëŠë¼ëŠ” ê²ƒë„ ë‹¹ì—°í•´ìš”. ì²œì²œíˆ ë§ˆìŒì„ ë‹¬ë˜ë³´ì„¸ìš”."
                ],
                "ë‘ë ¤ì›€": [
                    "ë¶ˆì•ˆí•œ ë§ˆìŒì´ ë“œì‹œëŠ”êµ°ìš”. ë‘ë ¤ì›€ì„ ëŠë¼ëŠ” ê²ƒì€ ìì—°ìŠ¤ëŸ¬ìš´ ì¼ì´ì—ìš”. ê·¸ ë§ˆìŒì„ ì´í•´í•´ìš”.",
                    "ê±±ì •ì´ ë§ìœ¼ì‹  ê²ƒ ê°™ì•„ìš”. ê·¸ëŸ° ê°ì •ì´ ë“¤ ë•ŒëŠ” ì •ë§ í˜ë“œì‹¤ ê²ƒ ê°™ì•„ìš”. í•¨ê»˜ í•´ê²°í•´ë´ìš”.",
                    "ë‘ë ¤ìš´ ë§ˆìŒì´ ëŠê»´ì ¸ìš”. ì´ëŸ° ê°ì •ë„ ìš°ë¦¬ê°€ ëŠë¼ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒì´ë‹ˆê¹Œìš”."
                ],
                "ë†€ëŒ": [
                    "ë†€ë¼ìš´ ì¼ì´ ìˆì—ˆë‚˜ ë´ìš”! ê·¸ ë†€ë¼ì›€ì´ ê¸€ì—ì„œ ëŠê»´ì ¸ìš”. ì–´ë–¤ ì¼ì´ì—ˆëŠ”ì§€ ê¶ê¸ˆí•´ìš”.",
                    "ê¹œì§ ë†€ë¼ì…¨ë‚˜ ë´ìš”. ê·¸ ë†€ë¼ì›€ì´ ìƒìƒí•˜ê²Œ ì „í•´ì ¸ìš”. ì •ë§ ëœ»ë°–ì˜ ì¼ì´ì—ˆë‚˜ ë´ìš”.",
                    "ë†€ë¼ìš´ ìƒí™©ì´ ìˆì—ˆë‚˜ ë´ìš”. ê·¸ ìˆœê°„ì˜ ê°ì •ì´ ì˜ í‘œí˜„ë˜ì–´ ìˆì–´ìš”."
                ],
                "í˜ì˜¤": [
                    "ë¶ˆì¾Œí•œ ì¼ì´ ìˆì—ˆë‚˜ ë´ìš”. ê·¸ëŸ° ê°ì •ì„ ëŠë¼ëŠ” ê²ƒë„ ìì—°ìŠ¤ëŸ¬ìš´ ì¼ì´ì—ìš”. ë§ˆìŒì„ ì •ë¦¬í•˜ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”.",
                    "ì‹«ì€ ì¼ì´ ìˆì—ˆë‚˜ ë´ìš”. ê·¸ ê°ì •ì„ í‘œí˜„í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì˜ë¯¸ê°€ ìˆì–´ìš”. ì²œì²œíˆ ë§ˆìŒì„ ë‹¬ë˜ë³´ì„¸ìš”.",
                    "ë¶ˆí¸í•œ ìƒí™©ì´ ìˆì—ˆë‚˜ ë´ìš”. ê·¸ëŸ° ê°ì •ë„ ìš°ë¦¬ê°€ ëŠë¼ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ê²ƒì´ë‹ˆê¹Œìš”."
                ],
                "ì¤‘ì„±": [
                    "í‰ì˜¨í•œ í•˜ë£¨ë¥¼ ë³´ë‚´ì‹  ê²ƒ ê°™ë„¤ìš”. ì´ëŸ° ì¼ìƒë„ ì†Œì¤‘í•œ ê²ƒ ê°™ì•„ìš”. ì”ì”í•œ ë§ˆìŒì´ ëŠê»´ì ¸ìš”.",
                    "ì°¨ë¶„í•œ ë§ˆìŒì´ ê¸€ì—ì„œ ëŠê»´ì ¸ìš”. ë•Œë¡œëŠ” ì´ëŸ° í‰ì˜¨í•¨ì´ í•„ìš”í•´ìš”. ì†Œì¤‘í•œ ì‹œê°„ì´ì—ˆì„ ê±°ì˜ˆìš”.",
                    "í‰ë²”í•œ ì¼ìƒë„ ë‚˜ë¦„ì˜ ì˜ë¯¸ê°€ ìˆëŠ” ê²ƒ ê°™ì•„ìš”. ì´ëŸ° ì”ì”í•œ ê°ì •ë„ ì¢‹ì€ ê²ƒ ê°™ì•„ìš”."
                ]
            },
            "encouraging": {
                "ê¸°ì¨": [
                    "ì´ëŸ° ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ê³„ì† ì´ì–´ì¡Œìœ¼ë©´ ì¢‹ê² ì–´ìš”! ì •ë§ ë©‹ì ¸ìš”. ì•ìœ¼ë¡œë„ ì´ëŸ° ìˆœê°„ë“¤ì´ ë§ì•„ì§€ê¸¸ ë°”ë¼ìš”!",
                    "í–‰ë³µí•œ ìˆœê°„ì„ ì˜ ê¸°ë¡í•´ë‘ì…¨ë„¤ìš”. ì´ëŸ° ì—ë„ˆì§€ë¡œ ì•ìœ¼ë¡œë„ í™”ì´íŒ…! ë” ë§ì€ ê¸°ì¨ì´ ì°¾ì•„ì˜¬ ê±°ì˜ˆìš”.",
                    "ê¸°ì¨ì´ ê°€ë“í•œ í•˜ë£¨ì˜€ë‚˜ ë´ìš”. ì´ëŸ° ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ì´ ì •ë§ ì¢‹ì•„ìš”. ê³„ì† ì´ëŸ° ì—ë„ˆì§€ë¥¼ ìœ ì§€í•´ë³´ì„¸ìš”!"
                ],
                "ìŠ¬í””": [
                    "í˜ë“  ì‹œê°„ì´ì§€ë§Œ ì´ê²¨ë‚¼ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”. ì‘ì›í•˜ê³  ìˆì–´ìš”! ê³§ ì¢‹ì€ ì¼ì´ ì°¾ì•„ì˜¬ ê±°ì˜ˆìš”.",
                    "ì§€ê¸ˆì€ í˜ë“¤ì§€ë§Œ ì´ ë˜í•œ ì§€ë‚˜ê°ˆ ê±°ì˜ˆìš”. ë‹¹ì‹ ì€ ì¶©ë¶„íˆ ê°•í•´ìš”! í˜ë‚´ì„¸ìš”!",
                    "ìŠ¬í”ˆ ì¼ì´ ìˆì–´ë„ ë‚´ì¼ì€ ë” ë‚˜ì€ ë‚ ì´ ë  ê±°ì˜ˆìš”. ì‘ì›í•˜ê³  ìˆì–´ìš”. í™”ì´íŒ…!"
                ],
                "ë¶„ë…¸": [
                    "í™”ê°€ ë‚˜ëŠ” ì¼ì´ ìˆì—ˆì§€ë§Œ ì´ë¥¼ í†µí•´ ë” ì„±ì¥í•  ìˆ˜ ìˆì„ ê±°ì˜ˆìš”! ì´ëŸ° ê°ì •ì„ ê¸ì •ì ìœ¼ë¡œ í™œìš©í•´ë³´ì„¸ìš”.",
                    "ë¶„ë…¸ë„ ì„±ì¥ì˜ ì›ë™ë ¥ì´ ë  ìˆ˜ ìˆì–´ìš”. í˜ë“  ê°ì •ì´ì§€ë§Œ ë” ë‚˜ì€ ë‚´ì¼ì„ ë§Œë“¤ì–´ê°€ìš”!",
                    "í™”ë‚˜ëŠ” ì¼ì´ ìˆì—ˆì§€ë§Œ ì´ë¥¼ ê·¹ë³µí•˜ë©´ ë” ê°•í•´ì§ˆ ê±°ì˜ˆìš”. ì‘ì›í•˜ê³  ìˆì–´ìš”!"
                ],
                "ë‘ë ¤ì›€": [
                    "ë¶ˆì•ˆí•œ ë§ˆìŒì´ ë“¤ì§€ë§Œ ìš©ê¸°ë¥¼ ë‚´ë³´ì„¸ìš”! ë‹¹ì‹ ì€ ìƒê°ë³´ë‹¤ ê°•í•´ìš”. í•œ ê±¸ìŒì”© ë‚˜ì•„ê°€ë©´ ë¼ìš”.",
                    "ë‘ë ¤ì›€ì„ ëŠë¼ëŠ” ê²ƒì€ ìì—°ìŠ¤ëŸ¬ì›Œìš”. í•˜ì§€ë§Œ ì´ë¥¼ ê·¹ë³µí•˜ë©´ ë” ì„±ì¥í•  ìˆ˜ ìˆì–´ìš”. í™”ì´íŒ…!",
                    "ê±±ì •ì´ ë§ìœ¼ì‹œê² ì§€ë§Œ ëª¨ë“  ì¼ì´ ì˜ ë  ê±°ì˜ˆìš”. ê¸ì •ì ìœ¼ë¡œ ìƒê°í•´ë³´ì„¸ìš”!"
                ],
                "ë†€ëŒ": [
                    "ë†€ë¼ìš´ ì¼ì´ ìˆì—ˆë‚˜ ë´ìš”! ì´ëŸ° ìƒˆë¡œìš´ ê²½í—˜ë“¤ì´ ì‚¶ì„ ë” í’ìš”ë¡­ê²Œ ë§Œë“¤ì–´ì¤„ ê±°ì˜ˆìš”.",
                    "ëœ»ë°–ì˜ ì¼ì´ ìˆì—ˆë‚˜ ë´ìš”. ì´ëŸ° ë†€ë¼ìš´ ìˆœê°„ë“¤ì´ ì‚¶ì˜ ì¬ë¯¸ë¥¼ ë”í•´ì£¼ëŠ” ê²ƒ ê°™ì•„ìš”!",
                    "ê¹œì§ ë†€ë¼ì…¨ë‚˜ ë´ìš”. ì´ëŸ° ì˜ˆìƒì¹˜ ëª»í•œ ì¼ë“¤ì´ ì‚¶ì„ ë” í¥ë¯¸ë¡­ê²Œ ë§Œë“¤ì–´ì¤˜ìš”!"
                ],
                "í˜ì˜¤": [
                    "ë¶ˆì¾Œí•œ ì¼ì´ ìˆì—ˆì§€ë§Œ ì´ë¥¼ í†µí•´ ë” ë‚˜ì€ í™˜ê²½ì„ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”. ê¸ì •ì ìœ¼ë¡œ ë³€í™”ì‹œì¼œë´ìš”!",
                    "ì‹«ì€ ì¼ì´ ìˆì—ˆì§€ë§Œ ì´ë¥¼ ê³„ê¸°ë¡œ ë” ì¢‹ì€ ê²ƒë“¤ì„ ì°¾ì•„ë³´ì„¸ìš”. í™”ì´íŒ…!",
                    "ë¶ˆí¸í•œ ìƒí™©ì´ ìˆì—ˆì§€ë§Œ ì´ë¥¼ ê·¹ë³µí•˜ë©´ ë” ê°•í•´ì§ˆ ê±°ì˜ˆìš”. ì‘ì›í•´ìš”!"
                ],
                "ì¤‘ì„±": [
                    "í‰ì˜¨í•œ í•˜ë£¨ë„ ì†Œì¤‘í•´ìš”. ì´ëŸ° ì¼ìƒì´ ìŒ“ì—¬ ë©‹ì§„ ì‚¶ì´ ë˜ëŠ” ê±°ì˜ˆìš”! ì˜¤ëŠ˜ë„ ìˆ˜ê³ í•˜ì…¨ì–´ìš”.",
                    "ì”ì”í•œ ì¼ìƒ ì†ì—ì„œë„ ì‘ì€ í–‰ë³µì„ ì°¾ì•„ë³´ì„¸ìš”. í™”ì´íŒ…! ë‚´ì¼ë„ ì¢‹ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”.",
                    "í‰ë²”í•œ ì¼ìƒë„ íŠ¹ë³„í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”. ì´ëŸ° ì°¨ë¶„í•œ ë§ˆìŒê°€ì§ì´ ì¢‹ì•„ìš”!"
                ]
            },
            "analytical": {
                "ê¸°ì¨": [
                    "ê¸ì •ì ì¸ ê°ì •ì´ ì£¼ìš”í•˜ê²Œ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì • ìƒíƒœê°€ ì „ë°˜ì ì¸ ì›°ë¹™ì— ë„ì›€ì´ ë  ê²ƒìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤.",
                    "ê¸°ì¨ì˜ ê°ì •ì´ ê°•í•˜ê²Œ í‘œì¶œë˜ê³  ìˆë„¤ìš”. ì´ëŸ° ê°ì • íŒ¨í„´ì´ ì§€ì†ë˜ë©´ ì •ì‹ ê±´ê°•ì— ì¢‹ì€ ì˜í–¥ì„ ë¯¸ì¹  ê²ƒ ê°™ìŠµë‹ˆë‹¤.",
                    "í–‰ë³µí•œ ê°ì •ì´ ì£¼ëœ í†¤ìœ¼ë¡œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤. ì´ëŸ° ê¸ì •ì  ê°ì •ì´ ì¼ìƒìƒí™œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ê´€ì°°í•´ë³´ì„¸ìš”."
                ],
                "ìŠ¬í””": [
                    "ë¶€ì •ì ì¸ ê°ì •ì´ ì£¼ìš”í•˜ê²Œ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì •ì˜ ì›ì¸ì„ íŒŒì•…í•˜ê³  ëŒ€ì²˜ ë°©ì•ˆì„ ëª¨ìƒ‰í•´ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
                    "ìŠ¬í””ì˜ ê°ì •ì´ ê°•í•˜ê²Œ í‘œí˜„ë˜ì—ˆë„¤ìš”. ì´ëŸ° ê°ì • íŒ¨í„´ì˜ ì£¼ê¸°ì™€ íŠ¸ë¦¬ê±°ë¥¼ ë¶„ì„í•´ë³´ì‹œëŠ” ê²ƒì´ ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.",
                    "ìš°ìš¸í•œ ê°ì •ì´ ì£¼ëœ í†¤ìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤. ì´ëŸ° ê°ì • ìƒíƒœì˜ ì§€ì† ì‹œê°„ê³¼ ê°•ë„ë¥¼ ëª¨ë‹ˆí„°ë§í•´ë³´ì„¸ìš”."
                ],
                "ë¶„ë…¸": [
                    "ê°•í•œ ë¶„ë…¸ì˜ ê°ì •ì´ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì •ì˜ íŠ¸ë¦¬ê±°ì™€ íŒ¨í„´ì„ ë¶„ì„í•´ë³´ëŠ” ê²ƒì´ ê°ì • ê´€ë¦¬ì— ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.",
                    "í™”ë‚œ ê°ì •ì´ ì£¼ìš”í•˜ê²Œ í‘œì¶œë˜ì—ˆë„¤ìš”. ì´ëŸ° ê°ì • ë°˜ì‘ì˜ ì›ì¸ê³¼ ëŒ€ì²˜ ë°©ë²•ì„ ì²´ê³„ì ìœ¼ë¡œ ë¶„ì„í•´ë³´ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.",
                    "ë¶„ë…¸ì˜ ê°ì •ì´ ê°•í•˜ê²Œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì •ì„ ê±´ì„¤ì ìœ¼ë¡œ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ëª¨ìƒ‰í•´ë³´ì„¸ìš”."
                ],
                "ë‘ë ¤ì›€": [
                    "ë¶ˆì•ˆê³¼ ë‘ë ¤ì›€ì˜ ê°ì •ì´ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì •ì˜ êµ¬ì²´ì  ì›ì¸ì„ ë¶„ì„í•˜ê³  ëŒ€ì²˜ ì „ëµì„ ìˆ˜ë¦½í•´ë³´ì„¸ìš”.",
                    "ê±±ì •ê³¼ ë‘ë ¤ì›€ì´ ì£¼ìš” ê°ì •ìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤. ì´ëŸ° ê°ì • íŒ¨í„´ì˜ ë¹ˆë„ì™€ ê°•ë„ë¥¼ ì¶”ì í•´ë³´ëŠ” ê²ƒì´ ë„ì›€ì´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤.",
                    "ë¶ˆì•ˆí•œ ê°ì •ì´ ì£¼ëœ í†¤ìœ¼ë¡œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì • ìƒíƒœì˜ ê´€ë¦¬ ë°©ë²•ì„ ì²´ê³„ì ìœ¼ë¡œ ì ‘ê·¼í•´ë³´ì„¸ìš”."
                ],
                "ë†€ëŒ": [
                    "ë†€ë¼ì›€ê³¼ ë‹¹í™©ì˜ ê°ì •ì´ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ì˜ˆìƒì¹˜ ëª»í•œ ìƒí™©ì— ëŒ€í•œ ì ì‘ ëŠ¥ë ¥ì„ ë¶„ì„í•´ë³´ì„¸ìš”.",
                    "ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€í™”ì— ëŒ€í•œ ë°˜ì‘ì´ ì£¼ìš”í•˜ê²Œ ë‚˜íƒ€ë‚¬ë„¤ìš”. ì´ëŸ° ìƒí™©ì—ì„œì˜ ëŒ€ì²˜ íŒ¨í„´ì„ ê´€ì°°í•´ë³´ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.",
                    "ë†€ë¼ìš´ ê°ì •ì´ ì£¼ëœ í†¤ìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤. ì´ëŸ° ìƒˆë¡œìš´ ê²½í—˜ì— ëŒ€í•œ ìˆ˜ìš© ëŠ¥ë ¥ì„ í‰ê°€í•´ë³´ì„¸ìš”."
                ],
                "í˜ì˜¤": [
                    "í˜ì˜¤ì™€ ê±°ë¶€ê°ì˜ ê°ì •ì´ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì •ì˜ ì›ì¸ê³¼ ëŒ€ìƒì„ êµ¬ì²´ì ìœ¼ë¡œ ë¶„ì„í•´ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
                    "ë¶ˆì¾Œí•œ ê°ì •ì´ ì£¼ìš”í•˜ê²Œ í‘œì¶œë˜ì—ˆë„¤ìš”. ì´ëŸ° ê°ì • ë°˜ì‘ì˜ íŒ¨í„´ê³¼ ëŒ€ì²˜ ë°©ë²•ì„ ì²´ê³„ì ìœ¼ë¡œ ì ‘ê·¼í•´ë³´ì„¸ìš”.",
                    "ê±°ë¶€ê°ì˜ ê°ì •ì´ ê°•í•˜ê²Œ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì •ì˜ í•©ë¦¬ì  ì²˜ë¦¬ ë°©ë²•ì„ ëª¨ìƒ‰í•´ë³´ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤."
                ],
                "ì¤‘ì„±": [
                    "ì¤‘ë¦½ì ì´ê³  ì•ˆì •ì ì¸ ê°ì • ìƒíƒœê°€ ì£¼ìš”í•˜ê²Œ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê°ì •ì  ê· í˜•ì´ ì§€ì†ë˜ëŠ” ê²ƒì´ ë°”ëŒì§í•©ë‹ˆë‹¤.",
                    "í‰ì˜¨í•œ ê°ì •ì´ ì£¼ëœ í†¤ìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤. ì´ëŸ° ê°ì •ì  ì•ˆì •ê°ì´ ì¼ìƒìƒí™œì— ë¯¸ì¹˜ëŠ” ê¸ì •ì  ì˜í–¥ì„ ê´€ì°°í•´ë³´ì„¸ìš”.",
                    "ì¤‘ì„±ì ì¸ ê°ì • íŒ¨í„´ì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤. ì´ëŸ° ê· í˜• ì¡íŒ ê°ì • ìƒíƒœë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•ì„ ë¶„ì„í•´ë³´ì‹œë©´ ì¢‹ê² ìŠµë‹ˆë‹¤."
                ]
            }
        }
    
    def generate(self, text: str, primary_emotion: str, style: str) -> FeedbackResponse:
        """ì‹¤ì œ ê°ì •ê³¼ ìŠ¤íƒ€ì¼ì— ê¸°ë°˜í•œ í”¼ë“œë°± ìƒì„±"""
        try:
            # ê°ì •ì´ í…œí”Œë¦¿ì— ì—†ìœ¼ë©´ ì¤‘ì„±ìœ¼ë¡œ ëŒ€ì²´
            if primary_emotion not in self.templates[style]:
                primary_emotion = "ì¤‘ì„±"
            
            # í”¼ë“œë°± ì„ íƒ (í…ìŠ¤íŠ¸ ê¸¸ì´ì— ë”°ë¼ ë‹¤ë¥¸ í”¼ë“œë°± ì„ íƒ)
            feedback_options = self.templates[style][primary_emotion]
            
            # í…ìŠ¤íŠ¸ ê¸¸ì´ì— ë”°ë¥¸ í”¼ë“œë°± ì„ íƒ ë¡œì§
            if len(text) > 100:
                # ê¸´ í…ìŠ¤íŠ¸ëŠ” ë” ìì„¸í•œ í”¼ë“œë°±
                selected_feedback = feedback_options[0]
            elif len(text) > 50:
                # ì¤‘ê°„ ê¸¸ì´ëŠ” ì ì ˆí•œ í”¼ë“œë°±
                selected_feedback = feedback_options[1] if len(feedback_options) > 1 else feedback_options[0]
            else:
                # ì§§ì€ í…ìŠ¤íŠ¸ëŠ” ê°„ë‹¨í•œ í”¼ë“œë°±
                selected_feedback = feedback_options[-1]
            
            # ì‹ ë¢°ë„ ê³„ì‚° (í…ìŠ¤íŠ¸ ê¸¸ì´ì™€ ê°ì • ëª…í™•ë„ì— ë”°ë¼)
            confidence = 0.7
            if len(text) > 50:
                confidence += 0.1
            if any(keyword in text.lower() for keywords in [
                ["í–‰ë³µ", "ê¸°ì˜", "ì¢‹"], ["ìŠ¬í”„", "í˜ë“¤"], ["í™”", "ì§œì¦"], 
                ["ë¬´ì„œ", "ê±±ì •"], ["ë†€ë¼", "ê¹œì§"], ["ì—­ê²¨", "ì‹«"]
            ] for keyword in keywords):
                confidence += 0.1
            
            confidence = min(confidence, 0.95)
            
            return FeedbackResponse(
                feedback_text=selected_feedback,
                style=style,
                confidence=confidence
            )
            
        except Exception as e:
            logger.error(f"í”¼ë“œë°± ìƒì„± ì¤‘ ì˜¤ë¥˜: {e}")
            return FeedbackResponse(
                feedback_text="ì˜¤ëŠ˜ í•˜ë£¨ë„ ìˆ˜ê³ í•˜ì…¨ì–´ìš”. ì¼ê¸°ë¥¼ ì“°ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì˜ë¯¸ ìˆëŠ” ì‹œê°„ì´ì—ˆì„ ê±°ì˜ˆìš”.",
                style=style,
                confidence=0.7
            )

# ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
emotion_analyzer = EmotionAnalyzer()
feedback_generator = FeedbackGenerator()
diary_converter = DiaryStyleConverter()

@app.get("/")
async def root():
    return {
        "message": "AI ê°ì • ë¶„ì„ ë° í”¼ë“œë°± ì„œë²„",
        "status": "running",
        "port": 8001
    }

@app.options("/api/v1/emotion/analyze")
async def options_analyze_emotion():
    """ê°ì • ë¶„ì„ API OPTIONS í•¸ë“¤ëŸ¬"""
    return {"status": "ok"}

@app.post("/api/v1/emotion/analyze")
async def analyze_emotion(request: EmotionAnalysisRequest):
    """ê°ì • ë¶„ì„ API"""
    try:
        if not request.text.strip():
            raise HTTPException(status_code=400, detail="í…ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.")
        
        result = emotion_analyzer.analyze(request.text)
        return result
        
    except Exception as e:
        logger.error(f"ê°ì • ë¶„ì„ ì¤‘ ì˜¤ë¥˜: {e}")
        raise HTTPException(status_code=500, detail="ê°ì • ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")

@app.options("/api/v1/feedback/generate")
async def options_generate_feedback():
    """í”¼ë“œë°± ìƒì„± API OPTIONS í•¸ë“¤ëŸ¬"""
    return {"status": "ok"}

@app.post("/api/v1/feedback/generate")
async def generate_feedback(request: FeedbackRequest):
    """í”¼ë“œë°± ìƒì„± API"""
    try:
        if not request.text.strip():
            raise HTTPException(status_code=400, detail="í…ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.")
        
        result = feedback_generator.generate(request.text, request.emotion, request.style)
        return result
        
    except Exception as e:
        logger.error(f"í”¼ë“œë°± ìƒì„± ì¤‘ ì˜¤ë¥˜: {e}")
        raise HTTPException(status_code=500, detail="í”¼ë“œë°± ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")

@app.options("/api/v1/diary/convert")
async def options_convert_diary():
    """ì¼ê¸°ì²´ ë³€í™˜ API OPTIONS í•¸ë“¤ëŸ¬"""
    return {"status": "ok"}

@app.post("/api/v1/diary/convert")
async def convert_to_diary_style(request: DiaryStyleRequest):
    """ì¼ê¸°ì²´ ë³€í™˜ API"""
    try:
        if not request.text.strip():
            raise HTTPException(status_code=400, detail="í…ìŠ¤íŠ¸ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.")
        
        # ë¨¼ì € ê°ì • ë¶„ì„ì„ ìˆ˜í–‰í•˜ì—¬ ì ì ˆí•œ ì¼ê¸°ì²´ í…œí”Œë¦¿ ì„ íƒ
        emotion_result = emotion_analyzer.analyze(request.text)
        primary_emotion = emotion_result.primary_emotion
        
        # ì¼ê¸°ì²´ë¡œ ë³€í™˜
        result = diary_converter.convert_to_diary_style(request.text, primary_emotion)
        return result
        
    except Exception as e:
        logger.error(f"ì¼ê¸°ì²´ ë³€í™˜ ì¤‘ ì˜¤ë¥˜: {e}")
        raise HTTPException(status_code=500, detail="ì¼ê¸°ì²´ ë³€í™˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")

if __name__ == "__main__":
    uvicorn.run(
        "simple_main:app",
        host="0.0.0.0",
        port=8001,
        reload=True
    ) 