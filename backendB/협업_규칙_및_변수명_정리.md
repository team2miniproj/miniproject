# ğŸš€ ìŒì„± ì¸ì‹ ì¼ê¸° í”„ë¡œì íŠ¸ - í˜‘ì—… ê·œì¹™ & ë³€ìˆ˜ëª… ì •ë¦¬

> ë…¸ì…˜ ì—…ë¡œë“œìš© í˜‘ì—… ê°€ì´ë“œ ë¬¸ì„œ  
> íŒ€ì›ë“¤ì´ ì¼ê´€ëœ ì½”ë”© ìŠ¤íƒ€ì¼ë¡œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ì •ë¦¬í•œ ê·œì¹™ì§‘

---

## ğŸ“‹ ëª©ì°¨
1. [ë„¤ì´ë° ì»¨ë²¤ì…˜](#-ë„¤ì´ë°-ì»¨ë²¤ì…˜)
2. [ì‹¤ì œ í”„ë¡œì íŠ¸ ë³€ìˆ˜ëª… ì˜ˆì‹œ](#-ì‹¤ì œ-í”„ë¡œì íŠ¸-ë³€ìˆ˜ëª…-ì˜ˆì‹œ)
3. [ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ](#-ì½”ë“œ-ìŠ¤íƒ€ì¼-ê°€ì´ë“œ)
4. [ê°œë°œ ì›Œí¬í”Œë¡œìš°](#-ê°œë°œ-ì›Œí¬í”Œë¡œìš°)
5. [ê°œë°œ ë„êµ¬ ì‚¬ìš©ë²•](#-ê°œë°œ-ë„êµ¬-ì‚¬ìš©ë²•)
6. [ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸](#-ì½”ë“œ-ë¦¬ë·°-ì²´í¬ë¦¬ìŠ¤íŠ¸)
7. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## ğŸ“ ë„¤ì´ë° ì»¨ë²¤ì…˜

### 1ï¸âƒ£ ë³€ìˆ˜ëª… & í•¨ìˆ˜ëª…
- **snake_case** ì‚¬ìš©
- ì˜ë¯¸ê°€ ëª…í™•í•œ ë‹¨ì–´ ì‚¬ìš©
- ì¤„ì„ë§ ì§€ì–‘

```python
# âœ… Good
user_id = "user123"
emotion_analysis_result = analyze_emotion()
primary_emotion_score = 0.85
analyzed_at = datetime.utcnow()

# âŒ Bad
usrId = "user123"
emotionAnalysisResult = analyze_emotion()
primaryEmotionScore = 0.85
analyzedAt = datetime.utcnow()
```

### 2ï¸âƒ£ í´ë˜ìŠ¤ëª…
- **PascalCase** ì‚¬ìš©
- ëª…ì‚¬ í˜•íƒœë¡œ ì‘ì„±

```python
# âœ… Good
class EmotionAnalysisService:
    pass

class KoGPTFeedbackGenerator:
    pass

class DatabaseManager:
    pass

# âŒ Bad
class emotionAnalysisService:
    pass
```

### 3ï¸âƒ£ ìƒìˆ˜ëª…
- **UPPER_SNAKE_CASE** ì‚¬ìš©

```python
# âœ… Good
API_VERSION = "1.0.0"
MAX_RETRY_COUNT = 3
DEFAULT_EMOTION_MODEL = "kobert"
EMOTION_LABELS = ["ê¸°ì¨", "ìŠ¬í””", "ë¶„ë…¸", "ë‘ë ¤ì›€", "ë†€ëŒ", "í˜ì˜¤", "ì¤‘ì„±"]
```

### 4ï¸âƒ£ íŒŒì¼ëª… & ë””ë ‰í† ë¦¬ëª…
- **snake_case** ì‚¬ìš©
- ëª¨ë“ˆ ì—­í• ì´ ëª…í™•í•˜ë„ë¡

```
# âœ… Good
emotion_service.py
feedback_generator.py
statistics_service.py
emotion_mapping.py

# âŒ Bad
emotionService.py
feedbackGen.py
```

### 5ï¸âƒ£ ì»¬ë ‰ì…˜/í…Œì´ë¸”ëª…
- **snake_case** ì‚¬ìš©
- ë³µìˆ˜í˜• ì‚¬ìš©

```python
# âœ… Good
collection_name = "emotion_analyses"
collection_name = "diary_entries"
collection_name = "feedback_results"

# âŒ Bad
collection_name = "emotionAnalysis"
collection_name = "diary_entry"
```

---

## ğŸ”§ ì‹¤ì œ í”„ë¡œì íŠ¸ ë³€ìˆ˜ëª… ì˜ˆì‹œ

### ê°ì • ë¶„ì„ ê´€ë ¨
```python
# ê°ì • ë¶„ì„ ê²°ê³¼
emotion_analysis_result: EmotionAnalysisResult
primary_emotion: EmotionLabel
primary_emotion_score: float
primary_emotion_emoji: str
all_emotions: List[EmotionScore]
confidence: float
model_used: str

# ê°ì • ë¶„ì„ ì„œë¹„ìŠ¤
emotion_classifier: EmotionClassifier
kobert_classifier: KoBERTEmotionClassifier
koelectra_classifier: KoELECTRAEmotionClassifier
```

### í”¼ë“œë°± ìƒì„± ê´€ë ¨
```python
# í”¼ë“œë°± ìƒì„±
feedback_generator: KoGPTFeedbackGenerator
feedback_text: str
feedback_style: str  # "empathetic", "encouraging", "analytical"
feedback_prompts: Dict[EmotionLabel, Dict[str, str]]
generated_text: str
cleaned_text: str
```

### ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨
```python
# ì»¬ë ‰ì…˜ëª…
collection_name: str
db_manager: DatabaseManager
emotion_collection = "emotion_analysis"
diary_collection = "diaries"
feedback_collection = "feedback_results"

# í•„ë“œëª…
user_id: str
created_at: datetime
updated_at: datetime
analyzed_at: datetime
is_active: bool
is_private: bool
```

### í†µê³„ ê´€ë ¨
```python
# í†µê³„ ë°ì´í„°
emotion_statistics: EmotionStatistics
emotion_distribution: List[EmotionCount]
dominant_emotion: EmotionLabel
daily_summary: DailyEmotionSummary
emotion_trends: List[EmotionTrend]
```

---

## ğŸ¨ ì½”ë“œ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

### 1ï¸âƒ£ Import ì •ë¦¬
```python
# í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬
from typing import Dict, Any, Optional, List
import logging
from datetime import datetime

# ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬
from fastapi import APIRouter, HTTPException
from pydantic import BaseModel
import torch

# ë¡œì»¬ ëª¨ë“ˆ
from models.emotion import EmotionLabel, EmotionAnalysisResult
from services.emotion_service import emotion_service
from config.database import db_manager
```

### 2ï¸âƒ£ ì£¼ì„ & ë¬¸ì„œí™”
- **í•œêµ­ì–´**ë¡œ í†µì¼
- ë³µì¡í•œ ë¡œì§ì€ ìƒì„¸íˆ ì„¤ëª…

```python
def analyze_emotion(text: str, model_type: str = "kobert") -> EmotionAnalysisResult:
    """
    í…ìŠ¤íŠ¸ì˜ ê°ì •ì„ ë¶„ì„í•©ë‹ˆë‹¤.
    
    Args:
        text: ë¶„ì„í•  í…ìŠ¤íŠ¸
        model_type: ì‚¬ìš©í•  ëª¨ë¸ ("kobert" or "koelectra")
    
    Returns:
        EmotionAnalysisResult: ê°ì • ë¶„ì„ ê²°ê³¼
    
    Raises:
        ValueError: ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ íƒ€ì…ì¸ ê²½ìš°
    """
    # ê°ì • ë¶„ì„ ë¡œì§ êµ¬í˜„
    pass
```

### 3ï¸âƒ£ ì—ëŸ¬ ì²˜ë¦¬
- **í•œêµ­ì–´** ì—ëŸ¬ ë©”ì‹œì§€
- ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€

```python
# âœ… Good
raise HTTPException(status_code=400, detail="í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
raise ValueError("ì§€ì›í•˜ì§€ ì•ŠëŠ” ëª¨ë¸ íƒ€ì…ì…ë‹ˆë‹¤.")
logger.error(f"ê°ì • ë¶„ì„ ì‹¤íŒ¨: {e}")

# âŒ Bad
raise HTTPException(status_code=400, detail="Text is required.")
raise ValueError("Invalid model type.")
```

### 4ï¸âƒ£ íƒ€ì… íŒíŠ¸
- ëª¨ë“  í•¨ìˆ˜ì— íƒ€ì… íŒíŠ¸ ì¶”ê°€
- ë³µì¡í•œ íƒ€ì…ì€ ë³„ë„ ì •ì˜

```python
# âœ… Good
async def analyze_emotion(text: str, user_id: str) -> EmotionAnalysisResponse:
    pass

# ë³µì¡í•œ íƒ€ì… ì •ì˜
EmotionScores = Dict[str, float]
UserHistory = List[EmotionAnalysisResult]
```

---

## ğŸ”„ ê°œë°œ ì›Œí¬í”Œë¡œìš°

### 1ï¸âƒ£ ìƒˆ ê¸°ëŠ¥ ê°œë°œ ì‹œ
```bash
# 1. ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
git checkout main
git pull origin main

# 2. ìƒˆ ë¸Œëœì¹˜ ìƒì„±
git checkout -b feature/ìƒˆë¡œìš´-ê¸°ëŠ¥ëª…

# 3. ê°œë°œ ì§„í–‰ í›„ ê²€ì‚¬
make format  # ì½”ë“œ í¬ë§·íŒ…
make lint    # ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
make test    # í…ŒìŠ¤íŠ¸ ì‹¤í–‰

# 4. ì»¤ë°‹ & í‘¸ì‹œ
git add .
git commit -m "feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€"
git push origin feature/ìƒˆë¡œìš´-ê¸°ëŠ¥ëª…
```

### 2ï¸âƒ£ ë¸Œëœì¹˜ ë„¤ì´ë°
```
# ê¸°ëŠ¥ ê°œë°œ
feature/ê°ì •ë¶„ì„-api
feature/í”¼ë“œë°±-ìƒì„±
feature/í†µê³„-ì°¨íŠ¸

# ë²„ê·¸ ìˆ˜ì •
fix/ê°ì •ë¶„ì„-ì˜¤ë¥˜ìˆ˜ì •
fix/ë°ì´í„°ë² ì´ìŠ¤-ì—°ê²°ì˜¤ë¥˜

# í•«í”½ìŠ¤
hotfix/ê¸´ê¸‰ìˆ˜ì •
```

### 3ï¸âƒ£ ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™
```
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
fix: ë²„ê·¸ ìˆ˜ì •
docs: ë¬¸ì„œ ìˆ˜ì •
style: ì½”ë“œ ìŠ¤íƒ€ì¼ ë³€ê²½
refactor: ë¦¬íŒ©í† ë§
test: í…ŒìŠ¤íŠ¸ ì¶”ê°€/ìˆ˜ì •
chore: ë¹Œë“œ ê³¼ì • ë˜ëŠ” ë³´ì¡° ë„êµ¬ ë³€ê²½
```

---

## ğŸ› ï¸ ê°œë°œ ë„êµ¬ ì‚¬ìš©ë²•

### Makefile ëª…ë ¹ì–´
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
make install      # í”„ë¡œë•ì…˜ ì˜ì¡´ì„±
make install-dev  # ê°œë°œ ì˜ì¡´ì„±

# ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬
make format       # ì½”ë“œ í¬ë§·íŒ… (black, isort)
make lint         # ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ (flake8, mypy)
make test         # í…ŒìŠ¤íŠ¸ ì‹¤í–‰

# ê°œë°œ ì„œë²„
make run          # ê°œë°œ ì„œë²„ ì‹¤í–‰

# ê¸°íƒ€
make clean        # ì„ì‹œ íŒŒì¼ ì •ë¦¬
make pre-commit   # pre-commit í›… ì„¤ì¹˜
make help         # ë„ì›€ë§
```

### ê°œë°œ í™˜ê²½ ì„¤ì •
```bash
# 1. ê°€ìƒí™˜ê²½ ìƒì„±
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate  # Windows

# 2. ê°œë°œ ì˜ì¡´ì„± ì„¤ì¹˜
make install-dev

# 3. pre-commit í›… ì„¤ì¹˜
make pre-commit

# 4. ê°œë°œ ì„œë²„ ì‹¤í–‰
make run
```

---

## âœ… ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë„¤ì´ë° & ìŠ¤íƒ€ì¼
- [ ] **snake_case** ë³€ìˆ˜ëª…/í•¨ìˆ˜ëª… ì‚¬ìš©
- [ ] **PascalCase** í´ë˜ìŠ¤ëª… ì‚¬ìš©
- [ ] **UPPER_SNAKE_CASE** ìƒìˆ˜ëª… ì‚¬ìš©
- [ ] ì˜ë¯¸ê°€ ëª…í™•í•œ ë³€ìˆ˜ëª… ì‚¬ìš©
- [ ] ì¤„ì„ë§ ì‚¬ìš© ì§€ì–‘

### ë¬¸ì„œí™”
- [ ] í•œêµ­ì–´ ì£¼ì„ ì‘ì„±
- [ ] ë³µì¡í•œ ë¡œì§ ì„¤ëª…
- [ ] docstring ì‘ì„± (Args, Returns, Raises)
- [ ] íƒ€ì… íŒíŠ¸ ì¶”ê°€

### ì½”ë“œ í’ˆì§ˆ
- [ ] ì ì ˆí•œ ì˜ˆì™¸ ì²˜ë¦¬
- [ ] í•œêµ­ì–´ ì—ëŸ¬ ë©”ì‹œì§€
- [ ] ë¡œê¹… ë©”ì‹œì§€ ì¶”ê°€
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

### êµ¬ì¡°
- [ ] Import ìˆœì„œ ì •ë¦¬
- [ ] í•¨ìˆ˜/í´ë˜ìŠ¤ ê°„ ì ì ˆí•œ ê³µë°±
- [ ] ë¼ì¸ ê¸¸ì´ 88ì ì´í•˜
- [ ] ì¼ê´€ëœ ì½”ë“œ ìŠ¤íƒ€ì¼

---

## ğŸ†˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤

#### 1. pre-commit í›… ì‹¤íŒ¨
```bash
# í•´ê²°ë°©ë²•
pre-commit uninstall
pre-commit install
pre-commit run --all-files
```

#### 2. ì½”ë“œ í¬ë§·íŒ… ì¶©ëŒ
```bash
# í•´ê²°ë°©ë²•
make format
# ë˜ëŠ”
black .
isort .
```

#### 3. íƒ€ì… ê²€ì‚¬ ì˜¤ë¥˜
```bash
# í•´ê²°ë°©ë²•
rm -rf .mypy_cache
mypy .
```

#### 4. í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨
```bash
# í•´ê²°ë°©ë²•
rm -rf .pytest_cache
pytest tests/ -v
```

#### 5. ê°œë°œ ì„œë²„ ì‹¤í–‰ ì•ˆë¨
```bash
# í•´ê²°ë°©ë²•
make install-dev
make run
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [PEP 8 - Python ì½”ë”© ìŠ¤íƒ€ì¼ ê°€ì´ë“œ](https://www.python.org/dev/peps/pep-0008/)
- [FastAPI ë¬¸ì„œ](https://fastapi.tiangolo.com/)
- [Pydantic ë¬¸ì„œ](https://docs.pydantic.dev/)

### ê°œë°œ ë„êµ¬
- [Black ì½”ë“œ í¬ë§·í„°](https://black.readthedocs.io/)
- [isort ì„í¬íŠ¸ ì •ë ¬](https://pycqa.github.io/isort/)
- [mypy íƒ€ì… ê²€ì‚¬](https://mypy.readthedocs.io/)
- [pytest í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬](https://docs.pytest.org/)

---

## ğŸ¤ ë„ì›€ ìš”ì²­

ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ:
1. **ë¨¼ì € í™•ì¸**: ì´ ë¬¸ì„œì˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì„¹ì…˜
2. **íŒ€ ì±„ë„**: ê°œë°œíŒ€ ì±„ë„ì— ì§ˆë¬¸
3. **Issue ìƒì„±**: GitHub Issuesì— ë²„ê·¸ ë¦¬í¬íŠ¸

---

**ğŸ’¡ ê¿€íŒ**: `make help` ëª…ë ¹ì–´ë¡œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ëª…ë ¹ì–´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!

**ğŸ”„ ì—…ë°ì´íŠ¸**: 2024ë…„ ê¸°ì¤€ ìµœì‹  ê·œì¹™ - ìƒˆë¡œìš´ ê·œì¹™ì´ ì¶”ê°€ë˜ë©´ ì´ ë¬¸ì„œë¥¼ ì—…ë°ì´íŠ¸í•´ì£¼ì„¸ìš”! 