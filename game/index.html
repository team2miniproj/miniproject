<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ê³ ì–‘ì´ ì í”„ ê²Œì„</title>
    <style>
        @font-face {
            font-family: 'NanumBanJjagBanJjagByeor';
            src: url('./NanumBanJjagBanJjagByeor.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        body {
            margin: 0;
            padding: 5px;
            background: #f5f5f0;
            font-family: 'NanumBanJjagBanJjagByeor', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            justify-content: center;
            overflow: hidden;
        }

        .diary-container {
            width: min(900px, calc(100vw - 10px));
            height: calc(100vh - 10px);
            max-width: 900px;
            background: #fefefe;
            border: 3px solid #2a2a2a;
            border-radius: 8px;
            position: relative;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: rotate(-0.5deg);
            display: flex;
            flex-direction: column;
        }

        /* ì†ê¸€ì”¨ ëŠë‚Œì˜ í—¤ë” */
        .diary-header-visual {
            height: 7.5vh;
            background: #fafafa;
            border-bottom: 2px solid #2a2a2a;
            border-bottom-style: dashed;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 min(30px, 3vw);
            position: relative;
            flex-shrink: 0;
        }

        .diary-header-visual::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                #2a2a2a 10%, 
                transparent 15%, 
                #2a2a2a 20%, 
                transparent 25%,
                #2a2a2a 30%,
                transparent 100%);
        }

        .diary-title-visual {
            height: 7.5vh;
            background: #fefefe;
            border-bottom: 2px solid #2a2a2a;
            display: flex;
            align-items: center;
            padding: 0 min(30px, 3vw);
            font-size: min(24px, 4vw);
            font-weight: 400;
            color: #2a2a2a;
            position: relative;
            transform: rotate(0.2deg);
            flex-shrink: 0;
        }

        .diary-title-visual::before {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 20px;
            right: 20px;
            height: 1px;
            background: #2a2a2a;
            transform: rotate(-0.1deg);
        }

        .main-content-area {
            height: 35vh;
            background: #fefefe;
            border-bottom: 3px solid #2a2a2a;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .main-content-area::before {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: repeating-linear-gradient(
                90deg,
                #2a2a2a 0px,
                #2a2a2a 2px,
                transparent 2px,
                transparent 8px
            );
        }

        .grid-bottom {
            height: 50vh;
            background: #fefefe;
            position: relative;
            flex-shrink: 0;
        }

        /* ì†ê·¸ë¦¼ ëŠë‚Œì˜ ê²©ì - ì •ì‚¬ê°í˜• ê²©ì */
        .grid-bottom::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(
                    90deg,
                    transparent 0px,
                    transparent calc(var(--grid-size) - 2px),
                    #bbb calc(var(--grid-size) - 2px),
                    #bbb var(--grid-size)
                ),
                repeating-linear-gradient(
                    0deg,
                    transparent 0px,
                    transparent calc(var(--grid-size) - 2px),
                    #bbb calc(var(--grid-size) - 2px),
                    #bbb var(--grid-size)
                );
            opacity: 0.6;
            --grid-size: 45px;
        }

        /* ì†ê¸€ì”¨ ìŠ¤íƒ€ì¼ í…ìŠ¤íŠ¸ */
        .handwritten {
            font-family: 'NanumBanJjagBanJjagByeor', cursive;
            font-weight: 400;
            color: #2a2a2a;
            transform: rotate(-0.3deg);
        }

        .weather-icons {
            font-size: min(24px, 4vw);
            display: flex;
            gap: min(12px, 2vw);
            transform: rotate(0.5deg);
        }

        .diary-header {
            height: 80px;
            display: none;
        }

        .diary-title {
            height: 60px;
            display: none;
        }

        .diary-content {
            height: 1060px;
            background: white;
            position: relative;
        }

        #gameContainer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            background: rgba(254, 254, 254, 0.95);
        }

        #gameCanvas {
            display: block;
            background: rgba(254, 254, 254, 0.95);
            width: 100%;
            height: 100%;
            touch-action: none;
        }

        #gameInfo {
            position: absolute;
            top: min(15px, 2vh);
            right: min(20px, 3vw);
            font-size: min(22px, 4vw);
            color: #2a2a2a;
            font-weight: 700;
            font-family: 'NanumBanJjagBanJjagByeor', cursive;
            background: rgba(255, 255, 255, 0.9);
            padding: min(6px, 1vw) min(12px, 2vw);
            border-radius: 8px;
            border: 2px solid #2a2a2a;
            transform: rotate(-1deg);
            box-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        #instructions {
            position: absolute;
            bottom: min(60px, 8vh);
            left: 50%;
            transform: translateX(-50%) rotate(0.3deg);
            text-align: center;
            color: #2a2a2a;
            font-size: min(18px, 3vw);
            font-family: 'NanumBanJjagBanJjagByeor', cursive;
            background: rgba(255, 255, 255, 0.9);
            padding: min(8px, 1vh) min(16px, 2.5vw);
            border-radius: 10px;
            border: 2px dashed #2a2a2a;
            font-weight: 400;
            box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
            white-space: nowrap;
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-0.5deg);
            font-size: min(32px, 5vw);
            color: #2a2a2a;
            text-align: center;
            display: none;
            font-weight: 700;
            font-family: 'NanumBanJjagBanJjagByeor', cursive;
            background: rgba(255, 255, 255, 0.98);
            padding: min(35px, 5vw);
            border-radius: 20px;
            border: 3px solid #2a2a2a;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            max-width: 90vw;
            box-sizing: border-box;
        }

        #gameOver div {
            margin: min(18px, 2vh) 0;
        }

        #gameOver .restart {
            font-size: min(22px, 3.5vw);
            margin-top: min(25px, 3vh);
            font-weight: 400;
        }

        .grid-area {
            display: none;
        }

        #currentDate {
            font-size: min(22px, 3.5vw);
            font-weight: 400;
        }

        /* ëª¨ë°”ì¼ ì „ìš© ìŠ¤íƒ€ì¼ */
        @media (max-width: 768px) {
            body {
                padding: 2px;
            }
            
            .diary-container {
                transform: rotate(0deg);
                width: calc(100vw - 4px);
                height: calc(100vh - 4px);
                border-radius: 12px;
            }
            
            .diary-header-visual {
                height: 7.5vh;
                padding: 0 15px;
            }
            
            .diary-title-visual {
                height: 7.5vh;
                padding: 0 15px;
                font-size: 18px;
            }
            
            .main-content-area {
                height: 35vh;
            }
            
            .grid-bottom {
                height: 50vh;
            }
            
            .grid-bottom::before {
                --grid-size: 35px;
            }
            
            #instructions {
                font-size: 14px;
                padding: 6px 12px;
                bottom: 50px;
            }
            
            #gameInfo {
                font-size: 18px;
                top: 10px;
                right: 15px;
                padding: 4px 8px;
            }
            
            #gameOver {
                font-size: 24px;
                padding: 20px;
            }
            
            #gameOver .restart {
                font-size: 18px;
                margin-top: 15px;
            }
            
            #currentDate {
                font-size: 16px;
            }
            
            .weather-icons {
                font-size: 18px;
                gap: 8px;
            }
        }
        
        @media (max-width: 480px) {
            .diary-title-visual {
                font-size: 16px;
            }
            
            .main-content-area {
                height: 35vh;
            }
            
            .grid-bottom {
                height: 50vh;
            }
            
            .grid-bottom::before {
                --grid-size: 28px;
            }
            
            #instructions {
                font-size: 12px;
                padding: 4px 10px;
                bottom: 40px;
            }
            
            #gameInfo {
                font-size: 16px;
            }
            
            #currentDate {
                font-size: 14px;
            }
            
            .weather-icons {
                font-size: 16px;
                gap: 6px;
            }
        }
        
        /* íƒœë¸”ë¦¿/í° í™”ë©´ìš© */
        @media (min-width: 1024px) {
            .grid-bottom::before {
                --grid-size: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="diary-container">
        <!-- ì¼ê¸°ì¥ í—¤ë” -->
        <div class="diary-header-visual">
            <div class="handwritten" id="currentDate">ë‚ ì§œ: </div>
            <div class="weather-icons">â˜€ï¸ â˜ï¸ â˜ï¸ ğŸŒ§ï¸ â›„ â„ï¸</div>
        </div>
        
        <!-- ì¼ê¸° ì œëª© -->
        <div class="diary-title-visual handwritten">
            ì œëª©: AIê°€ ì¼ê¸°ë¥¼ ìƒì„±í•˜ëŠ”ì¤‘ . . .
        </div>
        
        <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ (ê²Œì„ì´ ë“¤ì–´ê°ˆ í° ë„¤ëª¨ì¹¸) -->
        <div class="main-content-area">
            <div id="gameContainer">
                <canvas id="gameCanvas"></canvas>
                <div id="gameInfo">
                    <div id="score">00000</div>
                </div>
                
                <div id="gameOver">
                    <div>G A M E &nbsp;&nbsp; O V E R</div>
                    <div class="restart">í™”ë©´ ì•„ë¬´ ê³³ì´ë‚˜ í„°ì¹˜í•˜ê±°ë‚˜ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ë‹¤ì‹œ ì‹œì‘í•˜ì„¸ìš”</div>
                </div>
            </div>

            <div id="instructions">í™”ë©´ ì•„ë¬´ ê³³ì´ë‚˜ í„°ì¹˜í•˜ê±°ë‚˜ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ì í”„í•˜ì„¸ìš”!</div>
        </div>
        
        <!-- ê²©ì ì˜ì—­ -->
        <div class="grid-bottom"></div>
    </div>

    <script>
        // ê²Œì„ ë³€ìˆ˜ë“¤
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const gameOverElement = document.getElementById('gameOver');

        let gameRunning = false;
        let score = 0;
        let gameSpeed = 2;
        let groundY = 420; // ì´ˆê¸°ê°’, ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì¬ê³„ì‚°ë¨
        let scaleFactor = 1; // ìŠ¤ì¼€ì¼ íŒ©í„°

        // ê³ ì–‘ì´ ê°ì²´
        const cat = {
            x: 50,
            y: groundY - 20,
            width: 24,
            height: 20,
            velocityY: 0,
            jumping: false,
            grounded: true
        };

        // ì¥ì• ë¬¼ ë°°ì—´
        let obstacles = [];

        // ìº”ë²„ìŠ¤ í¬ê¸° ì¡°ì • í•¨ìˆ˜
        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            const containerRect = container.getBoundingClientRect();
            
            // ê¸°ë³¸ í•´ìƒë„ ì„¤ì •
            const baseWidth = 900;
            const baseHeight = 600;
            
            // ì»¨í…Œì´ë„ˆ í¬ê¸°ì— ë§ì¶° ìŠ¤ì¼€ì¼ ê³„ì‚°
            const scaleX = containerRect.width / baseWidth;
            const scaleY = containerRect.height / baseHeight;
            scaleFactor = Math.min(scaleX, scaleY);
            
            // ìº”ë²„ìŠ¤ í¬ê¸° ì„¤ì •
            canvas.width = containerRect.width;
            canvas.height = containerRect.height;
            
            // groundY ì¬ê³„ì‚° - 35vh ê²Œì„ ì˜ì—­ì— ë§ê²Œ ì¡°ì •
            // ë°”ë‹¥ì„ ì„ ê²Œì„ ê³µê°„ í•˜ë‹¨ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ê³ ì–‘ì´ì™€ ì¥ì• ë¬¼ì´ ì•„ë˜ìª½ì— ìœ„ì¹˜
            if (window.innerWidth <= 768) {
                groundY = canvas.height * 0.9; // ëª¨ë°”ì¼ì—ì„œ í•˜ë‹¨ìœ¼ë¡œ
            } else {
                groundY = canvas.height * 0.85;
            }
            
            // ê³ ì–‘ì´ ìœ„ì¹˜ ì¬ì„¤ì •
            if (cat.grounded) {
                cat.y = groundY - 20;
            }
            
            // ì¥ì• ë¬¼ ìœ„ì¹˜ ì¬ì¡°ì •
            obstacles.forEach(obstacle => {
                obstacle.y = groundY - obstacle.height;
            });
        }

        // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€
        window.addEventListener('resize', resizeCanvas);
        window.addEventListener('orientationchange', () => {
            setTimeout(resizeCanvas, 100);
        });

        // ê²Œì„ ì´ˆê¸°í™”
        function initGame() {
            gameRunning = true;
            score = 0;
            gameSpeed = 2;
            obstacles = [];
            cat.y = groundY - 20;
            cat.velocityY = 0;
            cat.jumping = false;
            cat.grounded = true;
            gameOverElement.style.display = 'none';
            updateScore();
        }

        // ì ìˆ˜ ì—…ë°ì´íŠ¸
        function updateScore() {
            scoreElement.textContent = score.toString().padStart(5, '0');
        }

        // í”½ì…€ ì•„íŠ¸ ê³ ì–‘ì´ ê·¸ë¦¬ê¸° (ìŠ¤ì¼€ì¼ ì ìš©)
        function drawCat() {
            const scale = scaleFactor;
            
            // ê³ ì–‘ì´ ëª¸ì²´ (íšŒìƒ‰)
            ctx.fillStyle = '#888888';
            ctx.fillRect((cat.x + 4) * scale, (cat.y + 8) * scale, 16 * scale, 8 * scale);
            
            // ê³ ì–‘ì´ ë¨¸ë¦¬ (íšŒìƒ‰)
            ctx.fillRect((cat.x + 8) * scale, cat.y * scale, 12 * scale, 12 * scale);
            
            // ê³ ì–‘ì´ ê·€ (íšŒìƒ‰)
            ctx.fillStyle = '#888888';
            ctx.fillRect((cat.x + 10) * scale, (cat.y - 2) * scale, 3 * scale, 4 * scale);
            ctx.fillRect((cat.x + 15) * scale, (cat.y - 2) * scale, 3 * scale, 4 * scale);
            
            // ê·€ ì•ˆìª½ (ë¶„í™)
            ctx.fillStyle = '#FFB6C1';
            ctx.fillRect((cat.x + 11) * scale, cat.y * scale, 1 * scale, 2 * scale);
            ctx.fillRect((cat.x + 16) * scale, cat.y * scale, 1 * scale, 2 * scale);
            
            // ì–¼êµ´ í°ìƒ‰ ë¶€ë¶„ â†’ íšŒìƒ‰ìœ¼ë¡œ ë³€ê²½
            ctx.fillStyle = '#888888';
            ctx.fillRect((cat.x + 10) * scale, (cat.y + 4) * scale, 8 * scale, 6 * scale);
            ctx.fillRect((cat.x + 12) * scale, (cat.y + 2) * scale, 4 * scale, 2 * scale);
            
            // ëˆˆ
            ctx.fillStyle = '#000000';
            ctx.fillRect((cat.x + 12) * scale, (cat.y + 3) * scale, 1 * scale, 1 * scale);
            ctx.fillRect((cat.x + 15) * scale, (cat.y + 3) * scale, 1 * scale, 1 * scale);
            
            // ì½”
            ctx.fillStyle = '#FFB6C1';
            ctx.fillRect((cat.x + 13) * scale, (cat.y + 5) * scale, 2 * scale, 1 * scale);
            
            // ì…
            ctx.fillStyle = '#000000';
            ctx.fillRect((cat.x + 13) * scale, (cat.y + 6) * scale, 1 * scale, 1 * scale);
            ctx.fillRect((cat.x + 15) * scale, (cat.y + 6) * scale, 1 * scale, 1 * scale);
            
            // ëª¸ì²´ í°ìƒ‰ ë¶€ë¶„ â†’ íšŒìƒ‰ìœ¼ë¡œ ë³€ê²½
            ctx.fillStyle = '#888888';
            ctx.fillRect((cat.x + 6) * scale, (cat.y + 10) * scale, 12 * scale, 4 * scale);
            
            // ë‹¤ë¦¬ (íšŒìƒ‰)
            ctx.fillStyle = '#888888';
            ctx.fillRect((cat.x + 6) * scale, (cat.y + 16) * scale, 3 * scale, 4 * scale);
            ctx.fillRect((cat.x + 11) * scale, (cat.y + 16) * scale, 3 * scale, 4 * scale);
            ctx.fillRect((cat.x + 16) * scale, (cat.y + 16) * scale, 3 * scale, 4 * scale);
            
            // ê¼¬ë¦¬ (ì—‰ë©ì´ ë’¤ìª½, ë” ê¸¸ê³  ìì—°ìŠ¤ëŸ½ê²Œ)
            ctx.fillRect((cat.x + 2) * scale, (cat.y + 12) * scale, 4 * scale, 2 * scale);
            ctx.fillRect(cat.x * scale, (cat.y + 10) * scale, 4 * scale, 2 * scale);
            ctx.fillRect((cat.x - 2) * scale, (cat.y + 8) * scale, 3 * scale, 2 * scale);
        }

        // ì—°í•„ ê·¸ë¦¬ê¸° (ìŠ¤ì¼€ì¼ ì ìš©)
        function drawPencil(obstacle) {
            const scale = scaleFactor;
            
            // ì—°í•„ ëª¸í†µ (ë…¸ë€ìƒ‰)
            ctx.fillStyle = '#FFD700';
            ctx.fillRect((obstacle.x + 2) * scale, (obstacle.y + 8) * scale, 8 * scale, (obstacle.height - 12) * scale);
            
            // ì—°í•„ ë (ë‚˜ë¬´ìƒ‰)
            ctx.fillStyle = '#D2691E';
            ctx.fillRect((obstacle.x + 3) * scale, obstacle.y * scale, 6 * scale, 8 * scale);
            
            // ì—°í•„ì‹¬ (ê²€ì€ìƒ‰)
            ctx.fillStyle = '#2F2F2F';
            ctx.fillRect((obstacle.x + 4) * scale, obstacle.y * scale, 4 * scale, 4 * scale);
            
            // ê¸ˆì† ê³ ë¦¬ (ì€ìƒ‰)
            ctx.fillStyle = '#C0C0C0';
            ctx.fillRect((obstacle.x + 2) * scale, (obstacle.y + obstacle.height - 8) * scale, 8 * scale, 3 * scale);
            
            // ì§€ìš°ê°œ (ë¶„í™ìƒ‰)
            ctx.fillStyle = '#FFB6C1';
            ctx.fillRect((obstacle.x + 3) * scale, (obstacle.y + obstacle.height - 5) * scale, 6 * scale, 5 * scale);
            
            // ì—°í•„ ë¸Œëœë“œ (ê²€ì€ìƒ‰ ì„ )
            ctx.fillStyle = '#000000';
            ctx.fillRect((obstacle.x + 3) * scale, (obstacle.y + 15) * scale, 6 * scale, 1 * scale);
            ctx.fillRect((obstacle.x + 4) * scale, (obstacle.y + 18) * scale, 4 * scale, 1 * scale);
        }

        // ì§€ìš°ê°œ ê·¸ë¦¬ê¸° (ìŠ¤ì¼€ì¼ ì ìš©)
        function drawEraser(obstacle) {
            const scale = scaleFactor;
            const topHeight = Math.floor(obstacle.height * 0.1);
            
            // ì§€ìš°ê°œ ìƒë‹¨ (íšŒìƒ‰)
            ctx.fillStyle = '#D3D3D3';
            ctx.fillRect(obstacle.x * scale, obstacle.y * scale, obstacle.width * scale, (topHeight + 2) * scale);
            
            // ì§€ìš°ê°œ ëª¸ì²´ (ë¶„í™ìƒ‰)
            ctx.fillStyle = '#FFB6C1';
            ctx.fillRect(obstacle.x * scale, (obstacle.y + topHeight + 2) * scale, obstacle.width * scale, (obstacle.height - topHeight - 2) * scale);
            
            // ì§€ìš°ê°œ ì˜†ë©´ (ì–´ë‘ìš´ ë¶„í™ìƒ‰)
            ctx.fillStyle = '#FF91A4';
            ctx.fillRect((obstacle.x + obstacle.width) * scale, (obstacle.y + topHeight + 2) * scale, 3 * scale, (obstacle.height - topHeight - 2) * scale);
            
            // ì§€ìš°ê°œ ì˜†ë©´ ìƒë‹¨ (ì–´ë‘ìš´ íšŒìƒ‰)
            ctx.fillStyle = '#A9A9A9';
            ctx.fillRect((obstacle.x + obstacle.width) * scale, obstacle.y * scale, 3 * scale, (topHeight + 2) * scale);
            
            // ë¸Œëœë“œ ë¼ë²¨ (í°ìƒ‰)
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect((obstacle.x + 2) * scale, (obstacle.y + obstacle.height/2 - 3) * scale, (obstacle.width - 4) * scale, 6 * scale);
            
            // ë¸Œëœë“œ í…ìŠ¤íŠ¸ (ê²€ì€ìƒ‰)
            ctx.fillStyle = '#000000';
            ctx.fillRect((obstacle.x + 4) * scale, (obstacle.y + obstacle.height/2 - 1) * scale, (obstacle.width - 8) * scale, 1 * scale);
            ctx.fillRect((obstacle.x + 4) * scale, (obstacle.y + obstacle.height/2 + 1) * scale, (obstacle.width - 8) * scale, 1 * scale);
        }

        // ì¥ì• ë¬¼ ê·¸ë¦¬ê¸°
        function drawObstacle(obstacle) {
            if (obstacle.type === 'pencil') {
                drawPencil(obstacle);
            } else if (obstacle.type === 'eraser') {
                drawEraser(obstacle);
            }
        }

        // êµ¬ë¦„ ê·¸ë¦¬ê¸° (ìŠ¤ì¼€ì¼ ì ìš©)
        function drawCloud(x, y) {
            const scale = scaleFactor;
            ctx.fillStyle = 'rgba(200, 200, 200, 0.8)';
            // êµ¬ë¦„ ëª¸ì²´
            ctx.fillRect(x * scale, y * scale, 20 * scale, 8 * scale);
            ctx.fillRect((x + 8) * scale, (y - 4) * scale, 16 * scale, 8 * scale);
            ctx.fillRect((x + 16) * scale, y * scale, 20 * scale, 8 * scale);
            ctx.fillRect((x + 12) * scale, (y + 4) * scale, 16 * scale, 6 * scale);
        }

        // ë°°ê²½ ê·¸ë¦¬ê¸°
        function drawBackground() {
            const currentTime = Date.now() * 0.001;
            const canvasWidth = canvas.width / scaleFactor;
            
            // êµ¬ë¦„ë“¤ (ìŠ¤ì¼€ì¼ ì ìš©) - ê²Œì„ ì˜ì—­ ìƒë‹¨ì— ë°°ì¹˜
            const cloudYOffset = window.innerWidth <= 768 ? (canvas.height * 0.1) / scaleFactor : 0;
            
            const cloud1Speed = 0.4;
            const cloud1X = canvasWidth + 40 - (currentTime * cloud1Speed * 60) % (canvasWidth + 120);
            const cloud1Y = 30 + cloudYOffset;
            drawCloud(cloud1X, cloud1Y);
            
            const cloud2Speed = 0.25;
            const cloud2X = canvasWidth + 60 - (currentTime * cloud2Speed * 45) % (canvasWidth + 140);
            const cloud2Y = 50 + cloudYOffset;
            drawCloud(cloud2X, cloud2Y);
            
            const cloud3Speed = 0.15;
            const cloud3X = canvasWidth + 20 - (currentTime * cloud3Speed * 35) % (canvasWidth + 100);
            const cloud3Y = 20 + cloudYOffset;
            drawCloud(cloud3X, cloud3Y);
            
            const cloud4Speed = 0.1;
            const cloud4X = canvasWidth + 80 - (currentTime * cloud4Speed * 25) % (canvasWidth + 160);
            const cloud4Y = 60 + cloudYOffset;
            drawCloud(cloud4X, cloud4Y);
            
            // ë°”ë‹¥ì„  ê·¸ë¦¬ê¸°
            ctx.strokeStyle = '#535353';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, groundY);
            ctx.lineTo(canvas.width, groundY);
            ctx.stroke();
            
            // ì ì„  ë°”ë‹¥ ë¬´ëŠ¬
            ctx.setLineDash([5, 10]);
            ctx.beginPath();
            ctx.moveTo(0, groundY + 10);
            ctx.lineTo(canvas.width, groundY + 10);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        // ì¥ì• ë¬¼ ìƒì„±
        function createObstacle() {
            const canvasWidth = canvas.width / scaleFactor;
            const minDistance = 120;
            const maxDistance = 250;
            const randomDistance = Math.random() * (maxDistance - minDistance) + minDistance;
            
            if (obstacles.length === 0 || obstacles[obstacles.length - 1].x < canvasWidth - randomDistance) {
                const obstacleTypes = ['pencil', 'eraser'];
                const type = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
                
                let obstacle = {
                    x: canvasWidth,
                    type: type
                };
                
                if (type === 'pencil') {
                    obstacle.width = 12;
                    obstacle.height = 40;
                    obstacle.y = groundY - obstacle.height;
                } else if (type === 'eraser') {
                    obstacle.width = 16;
                    obstacle.height = Math.random() > 0.5 ? 20 : 30;
                    obstacle.y = groundY - obstacle.height;
                }
                
                obstacles.push(obstacle);
            }
        }

        // ì¶©ëŒ ê°ì§€
        function checkCollision() {
            for (let obstacle of obstacles) {
                if (cat.x < obstacle.x + obstacle.width &&
                    cat.x + cat.width > obstacle.x &&
                    cat.y < obstacle.y + obstacle.height &&
                    cat.y + cat.height > obstacle.y) {
                    return true;
                }
            }
            return false;
        }

        // ê²Œì„ ì—…ë°ì´íŠ¸
        function updateGame() {
            if (!gameRunning) return;

            // ê³ ì–‘ì´ ë¬¼ë¦¬ ì²˜ë¦¬
            if (cat.jumping) {
                cat.velocityY += 0.5;
                cat.y += cat.velocityY;
                
                if (cat.y >= groundY - 20) {
                    cat.y = groundY - 20;
                    cat.velocityY = 0;
                    cat.jumping = false;
                    cat.grounded = true;
                }
            }

            // ì¥ì• ë¬¼ ì—…ë°ì´íŠ¸
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].x -= gameSpeed;
                
                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                    score += 1;
                    updateScore();
                }
            }

            createObstacle();

            if (checkCollision()) {
                gameRunning = false;
                gameOverElement.style.display = 'block';
            }

            if (score > 0 && score % 100 === 0) {
                gameSpeed += 0.2;
            }
        }

        // ê²Œì„ ë Œë”ë§
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            drawBackground();
            drawCat();
            
            for (let obstacle of obstacles) {
                drawObstacle(obstacle);
            }
        }

        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            updateGame();
            render();
            requestAnimationFrame(gameLoop);
        }

        // ì í”„ í•¨ìˆ˜
        function jump() {
            if (!gameRunning) {
                initGame();
            } else if (cat.grounded) {
                cat.velocityY = -12;
                cat.jumping = true;
                cat.grounded = false;
            }
        }

        // í‚¤ë³´ë“œ ì…ë ¥ ì²˜ë¦¬
        document.addEventListener('keydown', function(event) {
            if (event.code === 'Space') {
                event.preventDefault();
                jump();
            }
        });

        // í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ - í™”ë©´ ì „ì²´ì—ì„œ ë™ì‘
        document.addEventListener('touchstart', function(event) {
            event.preventDefault();
            jump();
        });

        document.addEventListener('click', function(event) {
            event.preventDefault();
            jump();
        });

        // ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
        function setCurrentDate() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();
            
            document.getElementById('currentDate').textContent = `ë‚ ì§œ: ${year}ë…„ ${month}ì›” ${day}ì¼`;
        }

        // ê²Œì„ ì‹œì‘
        setCurrentDate();
        resizeCanvas();
        initGame();
        gameLoop();
    </script>
</body>
</html> 